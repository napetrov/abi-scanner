# ABI Scanner â€” Ğ¦ĞµĞ»Ğ¸ Ğ¸ ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ°

**Ğ”Ğ°Ñ‚Ğ°:** 2026-02-21  
**Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ:** Experimental  
**Ğ¦ĞµĞ»ÑŒ:** Ğ£Ğ½Ğ¸Ğ²ĞµÑ€ÑĞ°Ğ»ÑŒĞ½Ğ°Ñ ÑƒÑ‚Ğ¸Ğ»Ğ¸Ñ‚Ğ° Ğ´Ğ»Ñ ÑÑ€Ğ°Ğ²Ğ½ĞµĞ½Ğ¸Ñ ABI ÑĞ¾Ğ²Ğ¼ĞµÑÑ‚Ğ¸Ğ¼Ğ¾ÑÑ‚Ğ¸ Ğ¿Ğ°ĞºĞµÑ‚Ğ¾Ğ² Ğ¸Ğ· Ñ€Ğ°Ğ·Ğ½Ñ‹Ñ… ĞºĞ°Ğ½Ğ°Ğ»Ğ¾Ğ²

---

## ğŸ¯ ĞšĞ»ÑÑ‡ĞµĞ²Ğ°Ñ Ğ¦ĞµĞ»ÑŒ

**Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ CLI-Ğ¸Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚ Ğ´Ğ»Ñ ÑÑ€Ğ°Ğ²Ğ½ĞµĞ½Ğ¸Ñ Ğ±Ğ¸Ğ½Ğ°Ñ€Ğ½Ğ¾Ğ¹ ÑĞ¾Ğ²Ğ¼ĞµÑÑ‚Ğ¸Ğ¼Ğ¾ÑÑ‚Ğ¸ (ABI) Ğ»ÑĞ±Ñ‹Ñ… C/C++ Ğ±Ğ¸Ğ±Ğ»Ğ¸Ğ¾Ñ‚ĞµĞº, Ñ€Ğ°ÑĞ¿Ñ€Ğ¾ÑÑ‚Ñ€Ğ°Ğ½ÑĞµĞ¼Ñ‹Ñ… Ñ‡ĞµÑ€ĞµĞ· package managers.**

### ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ğ°

Ğ Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‡Ğ¸ĞºĞ¸ Ğ¸ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ğ¸ C/C++ Ğ±Ğ¸Ğ±Ğ»Ğ¸Ğ¾Ñ‚ĞµĞº Ğ½Ğµ Ğ¸Ğ¼ĞµÑÑ‚ Ğ¿Ñ€Ğ¾ÑÑ‚Ğ¾Ğ³Ğ¾ ÑĞ¿Ğ¾ÑĞ¾Ğ±Ğ° Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ:
- Ğ¡Ğ¾Ğ²Ğ¼ĞµÑÑ‚Ğ¸Ğ¼Ğ° Ğ»Ğ¸ Ğ²ĞµÑ€ÑĞ¸Ñ Ğ¸Ğ· conda-forge Ñ Ğ²ĞµÑ€ÑĞ¸ĞµĞ¹ Ğ¸Ğ· Intel channel?
- ĞœĞ¾Ğ¶Ğ½Ğ¾ Ğ»Ğ¸ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ Ğ±Ğ¸Ğ±Ğ»Ğ¸Ğ¾Ñ‚ĞµĞºÑƒ Ğ±ĞµĞ· Ğ¿ĞµÑ€ĞµĞºĞ¾Ğ¼Ğ¿Ğ¸Ğ»ÑÑ†Ğ¸Ğ¸ Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ñ?
- ĞšĞ°ĞºĞ°Ñ Ğ²ĞµÑ€ÑĞ¸Ñ Ğ¿Ğ¾ÑĞ»ĞµĞ´Ğ½ÑÑ ABI-compatible Ñ Ğ¼Ğ¾ĞµĞ¹ Ñ‚ĞµĞºÑƒÑ‰ĞµĞ¹?

### Ğ ĞµÑˆĞµĞ½Ğ¸Ğµ

Ğ£Ğ½Ğ¸Ğ²ĞµÑ€ÑĞ°Ğ»ÑŒĞ½Ğ°Ñ CLI ÑƒÑ‚Ğ¸Ğ»Ğ¸Ñ‚Ğ°:
```bash
abi-scanner compare \
  --old conda-forge:dal=2025.9.0 \
  --new intel:dal=2025.10.0 \
  --format json

# Output: compatible/breaking + detailed diff
```

**ĞŸĞ¾Ğ´Ğ´ĞµÑ€Ğ¶ĞºĞ° Ğ¼Ğ½Ğ¾Ğ¶ĞµÑÑ‚Ğ²Ğ° Ğ¸ÑÑ‚Ğ¾Ñ‡Ğ½Ğ¸ĞºĞ¾Ğ²:**
- conda/mamba channels (conda-forge, Intel, defaults)
- APT repositories (Intel oneAPI, system packages)
- PyPI wheels (Ñ embedded .so)
- Local files (.deb, .rpm, .whl, .so)

---

## ğŸ—ï¸ ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ°

### ĞšĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ñ‹ Ğ¡Ğ¸ÑÑ‚ĞµĞ¼Ñ‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    CLI Interface                         â”‚
â”‚  abi-scanner compare/analyze/history/validate           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Package Source Adapters                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Conda  â”‚  â”‚   APT   â”‚  â”‚  PyPI   â”‚  â”‚  Local  â”‚   â”‚
â”‚  â”‚ Adapter â”‚  â”‚ Adapter â”‚  â”‚ Adapter â”‚  â”‚  File   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           Package Extraction Layer                       â”‚
â”‚  - Download temporary copy                               â”‚
â”‚  - Extract .so/.dylib from package                       â”‚
â”‚  - Handle different formats (.deb, .tar.bz2, .whl)       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              ABI Analysis Engine                         â”‚
â”‚  - Generate ABI baseline (libabigail/abidw)             â”‚
â”‚  - Compare baselines (abidiff)                           â”‚
â”‚  - Apply suppressions (filter internal symbols)          â”‚
â”‚  - Cache baselines for reuse                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            Result Formatting Layer                       â”‚
â”‚  - JSON output (machine-readable)                        â”‚
â”‚  - Human-readable summary                                â”‚
â”‚  - CI exit codes (0/4/8/12)                              â”‚
â”‚  - Markdown reports                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Data Flow

```
User Input â†’ Package Spec â†’ Download â†’ Extract â†’ Analyze â†’ Compare â†’ Report
    â†“            â†“              â†“          â†“         â†“         â†“
"conda:dal   resolve to   fetch from   find .so   abidw    abidiff   JSON/text
 =2025.9"    real URL     channel      files      â†’.abi    â†’diff
```

---

## ğŸ‘¤ User Experience (UX)

### Use Case 1: Ğ¡Ñ€Ğ°Ğ²Ğ½ĞµĞ½Ğ¸Ğµ Ğ´Ğ²ÑƒÑ… Ğ²ĞµÑ€ÑĞ¸Ğ¹

**Input:**
```bash
abi-scanner compare \
  --old conda-forge:dal=2025.9.0 \
  --new conda-forge:dal=2025.10.0
```

**Output:**
```
Comparing ABI: dal 2025.9.0 â†’ 2025.10.0
Source: conda-forge (linux-64)

Status: âœ… COMPATIBLE (exit code: 0)
  No ABI changes detected

Summary:
  Functions: 0 removed, 0 changed, 0 added
  Variables: 0 removed, 0 changed, 0 added
  
Baseline cached: ~/.abi-scanner/cache/dal_2025.9.0.abi
                 ~/.abi-scanner/cache/dal_2025.10.0.abi
```

**Alternative Output (JSON):**
```bash
abi-scanner compare ... --format json
```
```json
{
  "old": {"channel": "conda-forge", "package": "dal", "version": "2025.9.0"},
  "new": {"channel": "conda-forge", "package": "dal", "version": "2025.10.0"},
  "status": "compatible",
  "exit_code": 0,
  "changes": {
    "functions": {"removed": 0, "changed": 0, "added": 0},
    "variables": {"removed": 0, "changed": 0, "added": 0}
  }
}
```

### Use Case 2: Cross-Channel Comparison

**Ğ’Ğ¾Ğ¿Ñ€Ğ¾Ñ:** "Intel dal ÑĞ¾Ğ²Ğ¼ĞµÑÑ‚Ğ¸Ğ¼ Ñ conda-forge dal?"

```bash
abi-scanner compare \
  --old conda-forge:dal=2025.9.0 \
  --new intel:dal=2025.9.0
```

**Output:**
```
Comparing ABI: dal 2025.9.0 (conda-forge vs intel)

Status: âŒ BREAKING (exit code: 12)
  7 symbols removed, 3 symbols added

Removed (breaking):
  - oneapi::dal::array<int>::operator=(array&&)
  - oneapi::dal::array<float>::operator=(array&&)
  ...

Warning: These are different builds of the same version!
Recommendation: Stick to one channel for consistency.
```

### Use Case 3: Find Compatible Versions

**Ğ’Ğ¾Ğ¿Ñ€Ğ¾Ñ:** "ĞšĞ°ĞºÑƒÑ Ğ½Ğ¾Ğ²ÑƒÑ Ğ²ĞµÑ€ÑĞ¸Ñ dal Ñ Ğ¼Ğ¾Ğ³Ñƒ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ²Ğ¼ĞµÑÑ‚Ğ¾ 2025.8.0?"

```bash
abi-scanner compatible \
  --current conda-forge:dal=2025.8.0 \
  --newer
```

**Output:**
```
Checking compatible upgrades for dal=2025.8.0 (conda-forge)

âœ… dal=2025.9.0  (compatible, +3 symbols)
âœ… dal=2025.10.0 (compatible, no changes)
âŒ dal=2025.11.0 (breaking, -5 symbols)

Recommendation: Safe to upgrade to 2025.10.0
```

### Use Case 4: Validate SemVer

**Ğ’Ğ¾Ğ¿Ñ€Ğ¾Ñ:** "Ğ¡Ğ¾Ğ¾Ñ‚Ğ²ĞµÑ‚ÑÑ‚Ğ²ÑƒĞµÑ‚ Ğ»Ğ¸ Ğ²ĞµÑ€ÑĞ¸Ğ¾Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ oneDAL Semantic Versioning?"

```bash
abi-scanner validate \
  --package conda-forge:dal \
  --versions 2025.0.0:2025.10.0
```

**Output:**
```
Validating SemVer compliance for dal (2025.0.0 â†’ 2025.10.0)

âœ… 2025.0.0 â†’ 2025.0.1  (patch, exit 0)
âœ… 2025.0.1 â†’ 2025.1.0  (minor, exit 4, additions only)
âŒ 2025.1.0 â†’ 2025.2.0  (minor, exit 12, BREAKING!)
   Violation: removed symbols in minor version

SemVer compliance: 89% (25/28 transitions valid)
Violations: 3
```

### Use Case 5: Local File Comparison

**Ğ’Ğ¾Ğ¿Ñ€Ğ¾Ñ:** "Ğ¯ ÑĞ¾Ğ±Ñ€Ğ°Ğ» Ğ±Ğ¸Ğ±Ğ»Ğ¸Ğ¾Ñ‚ĞµĞºÑƒ Ğ»Ğ¾ĞºĞ°Ğ»ÑŒĞ½Ğ¾, ÑĞ¾Ğ²Ğ¼ĞµÑÑ‚Ğ¸Ğ¼Ğ° Ğ»Ğ¸ Ğ¾Ğ½Ğ° Ñ conda Ğ²ĞµÑ€ÑĞ¸ĞµĞ¹?"

```bash
abi-scanner compare \
  --old conda-forge:dal=2025.9.0 \
  --new local:/path/to/my/libonedal.so
```

### Use Case 6: CI/CD Integration

**.github/workflows/abi-check.yml:**
```yaml
- name: Check ABI compatibility
  run: |
    abi-scanner compare \
      --old conda-forge:dal=${{ github.base_ref }} \
      --new local:./build/libonedal.so \
      --format json \
      --fail-on breaking
```

---

## ğŸ“‹ Ğ§Ñ‚Ğ¾ Ğ£Ğ–Ğ• Ğ Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚ (Implemented)

### âœ… CLI Commands
- [x] **`abi-scanner compare`** â€” Ğ¿Ğ¾Ğ»Ğ½Ñ‹Ğ¹ pipeline conda/apt/local
  - Intel conda, conda-forge, APT, local (.so / archives)
  - Suppression Ñ„Ğ°Ğ¹Ğ»Ñ‹, JSON output, --fail-on
- [x] **`abi-scanner list`** â€” Ğ¿ĞµÑ€ĞµÑ‡Ğ¸ÑĞ»ĞµĞ½Ğ¸Ğµ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ñ‹Ñ… Ğ²ĞµÑ€ÑĞ¸Ğ¹
  - Intel conda, conda-forge (micromamba search)
  - Intel APT (Packages.gz parsing)
  - --filter regex, --format json
- [x] **`abi-scanner compatible`** â€” Ğ¿Ğ¾Ğ¸ÑĞº ÑĞ¾Ğ²Ğ¼ĞµÑÑ‚Ğ¸Ğ¼Ğ¾Ğ³Ğ¾ Ğ´Ğ¸Ğ°Ğ¿Ğ°Ğ·Ğ¾Ğ½Ğ° Ğ²ĞµÑ€ÑĞ¸Ğ¹
  - base version â†’ ÑÑ€Ğ°Ğ²Ğ½ĞµĞ½Ğ¸Ğµ ÑĞ¾ Ğ²ÑĞµĞ¼Ğ¸ Ğ±Ğ¾Ğ»ĞµĞµ Ğ½Ğ¾Ğ²Ñ‹Ğ¼Ğ¸
  - --stop-at-first-break, --fail-on, --format json
- [ ] **`abi-scanner validate`** â€” planned (SemVer compliance)

### âœ… Package Sources
- [x] **Conda/mamba** â€” CondaSource adapter
  - conda-forge, Intel channel
  - `list_versions()`, download, extract, find .so
- [x] **Intel APT** â€” AptSource adapter
  - `resolve_url()` â€” Packages.gz URL resolution
  - `list_versions()` â€” Packages.gz version enumeration
  - Download .deb, extract via dpkg-deb
- [x] **Local files** â€” LocalSource adapter
  - .so Ñ„Ğ°Ğ¹Ğ»Ñ‹ Ğ½Ğ°Ğ¿Ñ€ÑĞ¼ÑƒÑ
  - ĞÑ€Ñ…Ğ¸Ğ²Ñ‹ (.deb, .conda, .tar.gz, .zip) â†’ extract then find

### âœ… ABI Analysis
- [x] **Baseline generation** â€” abidw
- [x] **Comparison** â€” abidiff, exit codes (0/4/8/12)
- [x] **Symbol Filtering** â€” suppression ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³Ğ¸
  - `config/suppressions/oneccl.txt` â€” oneCCL
  - `config/suppressions/compiler.txt` â€” DPC++ compiler (libsycl)

### âœ… Output Formats
- [x] **Text** â€” human-readable Ñ verdict/ÑÑ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºĞ¾Ğ¹
- [x] **JSON** â€” machine-readable Ğ´Ğ»Ñ CI
- [x] **Exit codes** â€” 0/4/8/12 Ğ´Ğ»Ñ CI/CD

### âœ… Package Configs
- [x] `config/package_configs/oneccl.yaml`
- [x] `config/package_configs/compiler.yaml`

### âœ… Scripts
- [x] `compare_all_history.py` â€” batch history (conda + APT channels)
  - APT channel support (--apt-pkg-pattern, --apt-base-url)
  - Lazy micromamba init, validated --filter-version regex

### âœ… Known ABI Results
- oneCCL 2021.14.0â†’2021.14.1: NO_CHANGE
- oneCCL 2021.14.xâ†’2021.15.0: BREAKING (-2 +20)
- DPC++ libsycl 2025.0.x: Stable patch series
- DPC++ libsycl 2025.0â†’2025.1: BREAKING (-1 +78)
- DPC++ libsycl 2025.1â†’2025.2: BREAKING (-7 +94)
- DPC++ libsycl 2025.2â†’2025.3: COMPATIBLE (+164)

---

## ğŸ“‹ Ğ§Ñ‚Ğ¾ ĞĞĞ”Ğ Ğ¡Ğ´ĞµĞ»Ğ°Ñ‚ÑŒ (TODO)

### âœ… CLI Interface â€” DONE (PR #10, #11, #12)
- [x] `abi-scanner compare` â€” conda, apt, local
- [x] `abi-scanner list` â€” conda, apt
- [x] `abi-scanner compatible` â€” find ABI-compatible version range
- [x] Package spec parser: `channel:package=version`
- [x] Source adapters: CondaSource, AptSource, LocalSource

### âŒ Advanced Features (Priority 1)

### âŒ Advanced Features (Priority 1)
- [x] **Version discovery** â€” `abi-scanner list` (PR #11)
- [x] **Compatible version finder** â€” `abi-scanner compatible` (PR #12)
- [ ] **SemVer validation** â€” `abi-scanner validate` (planned PR #13)
  - Batch check all transitions for a version range
  - Report SemVer violations with evidence
- [ ] **Cross-channel comparison**
  - conda-forge:dal vs intel:dal
  - Detection of different builds

### âŒ Output & Reporting (Priority 2)
- [ ] **JSON output** â€” machine-readable
  - Structured format for CI
  - Detailed diff in JSON

- [ ] **Markdown reports**
  - GitHub-friendly format
  - Tables, badges, summaries

- [ ] **CI-friendly flags**
  - `--fail-on breaking` â€” exit 1 if breaking
  - `--allow additions` â€” permit exit code 4

### âŒ Performance & Caching (Priority 3)
- [ ] **Baseline cache** â€” ~/.abi-scanner/cache/
  - Reuse downloaded packages
  - Reuse generated .abi files
  - Cache invalidation strategy

- [ ] **Parallel processing**
  - Download multiple versions concurrently
  - Parallel baseline generation

### âŒ Error Handling (Priority 3)
- [ ] Package not found â†’ clear error message
- [ ] Network failures â†’ retry logic
- [ ] Unsupported package type â†’ graceful fail

### âŒ Documentation (Priority 2)
- [ ] Man page (`man abi-scanner`)
- [ ] Tutorial: first comparison
- [ ] Cookbook: common use cases
- [ ] API reference for JSON output

---

## ğŸ—ºï¸ Implementation Plan

### Phase 1: CLI Unification (Week 1-2)
**Goal:** Single `abi-scanner` command for all operations

**Tasks:**
1. Create main CLI entry point (Python Click/argparse)
2. Implement package spec parser: `channel:package=version`
3. Refactor existing scripts into subcommands
4. Add --format json flag
5. Comprehensive help text

**Deliverable:** `abi-scanner compare conda-forge:dal=2025.9 conda-forge:dal=2025.10` works

### Phase 2: Channel Abstraction (Week 3)
**Goal:** Generic source adapter interface

**Tasks:**
1. Define `PackageSource` interface
2. Refactor conda logic into CondaSource adapter
3. Refactor APT logic into APTSource adapter
4. Implement LocalFileSource adapter
5. Auto-detect source from spec

**Deliverable:** Cross-channel comparison works

### Phase 3: Advanced Features (Week 4-5)
**Goal:** User-requested features

**Tasks:**
1. Implement `compatible` subcommand (version finder)
2. Implement `validate` subcommand (SemVer checker)
3. Implement `list` subcommand (version discovery)
4. JSON output format
5. --fail-on flag for CI

**Deliverable:** All use cases from UX section work

### Phase 4: Polish & Documentation (Week 6)
**Goal:** Production-ready tool

**Tasks:**
1. Error handling & retries
2. Baseline caching
3. Man page & tutorial
4. GitHub Actions example
5. Release v0.1.0

**Deliverable:** Public announcement & adoption

---

## ğŸ“Š Success Metrics

### Technical
- **CLI works:** All 6 use cases executable
- **Multi-source:** â‰¥3 package sources supported (conda, APT, local)
- **Performance:** <5 min to compare two versions (cold cache)
- **Cache hit rate:** >80% on repeated comparisons

### Adoption
- **External users:** â‰¥5 people outside Intel use the tool
- **GitHub activity:** â‰¥10 stars, â‰¥3 contributors
- **CI integrations:** â‰¥2 projects use in GitHub Actions

### Impact
- **Bugs caught:** â‰¥1 ABI break detected in PR before merge
- **SemVer violations:** Document â‰¥3 violations with evidence

---

## ğŸš§ Risks

### Risk: libabigail limitations
**Mitigation:** Test with diverse libraries, fallback to abi-compliance-checker

### Risk: Package format diversity
**Mitigation:** Start with mainstream (conda, APT), expand incrementally

### Risk: Performance (large libraries)
**Mitigation:** Implement caching early, parallel processing

### Risk: Maintenance burden
**Mitigation:** Clear abstractions, automated tests, community contributions

---

## ğŸ§ª Testing Strategy

### Unit Tests
- Package spec parser
- Channel adapters (mock downloads)
- Output formatters

### Integration Tests
- Full comparison flow (real conda packages)
- Cross-channel comparison
- SemVer validation

### End-to-End Tests
- CI workflow simulation
- Error scenarios (network failures, bad packages)

---

## ğŸ“¦ Current Status

**oneDAL Experiment:** âœ… Complete
- 35 versions analyzed (proof of concept)
- Demonstrates tool feasibility
- Identified real SemVer violation (2025.1â†’2025.2)

**Next:** Build generic CLI tool (Phase 1-4 above)

---

**Last Updated:** 2026-02-25  
**Next Review:** After validate command (PR #13)
